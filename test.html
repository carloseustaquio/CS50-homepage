<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="styles.css" />
  <title>Home Page</title>
</head>
<body onload="loadQuestion()">
  <nav class="navbar position-absolute container-fluid navbar-light bg-light px-5">
    <a class="navbar-brand" href="index.html">
      <!-- <img src="cs50_logo.jpg" alt="cs50 logo" /> -->
      <strong class="h5">CS50</strong>
      this was.
      <img class="rounded-circle ml-3" src="yoda.png" alt="yoda master" />
    </a>
    <div>
      <a class="btn btn-light" href="#">Author</a>
      <a class="btn btn-light" href="#">About</a>
    </div>
  </nav>
  <main class="container-fluid d-flex bg-dark justify-content-center align-items-center" >
    <div class="w-50 card bg-dark text-light text-center ">
      <div class="card-body neo-shadow-2 br-8 bg-grad-gray">
        <h4 id="h4" class="card-title"></h4>
        <p id="p" class="card-text"></p>
        <button onclick="vote(1)" id="bt1" class="btn btn-light mt-3 answer-bt"></button>
        <button onclick="vote(2)" id="bt2" class="btn btn-light mt-3 answer-bt"></button>
      </div>
    </div>
  </main>
  <script>
    let questions = [
      { 
        id: 1, 
        text: `What's the genre of the show 'CS50 with David Malan?'`,  
        opts: [
          { id: 1, text: "CS Obviously", correct: false },
          { id: 2, text: "Drama, Comedy, Horror", correct: true },
        ] 
      },
      { 
        id: 2,
        text: `How would you sort an array of people holding numbers?`,
        opts: [
          { id: 1, text: "Human intuition", correct: true },
          { id: 2, text: "Bubble sort", correct: false },
        ] 
      },
      { 
        id: 3,
        text: `Best way of searching through a phone book:`,
        opts: [
          { id: 1, text: "Politely look each page", correct: false },
          { id: 2, text: "Rip it recursively", correct: true },
        ] 
      },
      { 
        id: 4,
        text: `How should you organize your clothes to be more confident and popular at college?`,
        opts: [
          { id: 1, text: "In a stack", correct: false },
          { id: 2, text: "In a list", correct: true },
        ] 
      },
      { 
        id: 5,
        text: `What are Strings in C?`,
        opts: [
          { id: 1, text: "A lie...", correct: true },
          { id: 2, text: "A string, duh", correct: false },
        ] 
      },
      { 
        id: 6,
        text: `What Tideman (pset 3) does?`,
        opts: [
          { id: 1, text: "Something with votes", correct: false },
          { id: 2, text: "It hurts. A lot.", correct: true },
        ] 
      },
    ]
    let counter = 1
    let selQuestion = null
    let answers = []
    
    function vote(id) {
      selQuestion.opts.forEach(opt => {
        if (opt.id === id) {
          answers.push({ question_id: selQuestion.id, correct: opt.correct })
        }
      })
      loadQuestion()
    }

    function loadQuestion() {
      if (questions.length === 0) return finishTest()

      const selectedId = Math.floor(Math.random() * questions.length)
      selQuestion = questions[selectedId]
      const h4 = document.querySelector("#h4")
      const p = document.querySelector("#p")
      const bt1 = document.querySelector("#bt1")
      const bt2 = document.querySelector("#bt2")
      const title = document.createTextNode(`Question NÂº ${counter}`)
      const question = document.createTextNode(selQuestion.text)
      const answer1 = document.createTextNode(selQuestion.opts[0].text)
      const answer2 = document.createTextNode(selQuestion.opts[1].text)
      
      if (h4.childNodes.length === 0) {
        h4.appendChild(title, h4.childNodes)
        p.appendChild(question, p.childNodes)
        bt1.appendChild(answer1, bt1.childNodes)
        bt2.appendChild(answer2, bt2.childNodes)
      }
      else {
        h4.replaceChild(title, h4.childNodes[0])
        p.replaceChild(question, p.childNodes[0])
        bt1.replaceChild(answer1, bt1.childNodes[0])
        bt2.replaceChild(answer2, bt2.childNodes[0])
      }

      counter++
      questions = questions.filter(q => q.id !== selQuestion.id)
    }
    
    function finishTest() {
      alert("You finished!")
    }

  </script>
</body>
</html>